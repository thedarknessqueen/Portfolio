////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////.
////////////////////////////////////////////// LE JEU DE LA VIE ////////////////////////////////////////////////////////.
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////.
////////////////////////////////////////////// Classe Ligne ////////////////////////////////////////////////////////////.
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////.
////////////////////Inclusion des fichier, bibliothèques, namespace et instances de classes/////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////.

#include "Ligne.h"
#include "Fichier.h"
#include <iostream>

using namespace std;

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////.
///////////////////////////////////////////Méthodes de la classe Ligne//////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////.

Ligne::Ligne(vector<string> grille): grille(grille), colonne(grille[0].size()), ligne(grille.size()), x(0), y(0), gridWidth(0), gridHeight(0) {}

//Changement de l'éta '0' ou '1' en fonction des 8 cases environnantes
void Ligne::change_etat() {
    vector<string> nvlle = grille;

    for (int i = 0; i < ligne; ++i) {
        for (int j = 0; j < colonne; ++j) {
            int voisin = CompteCell(i, j,grille);
            if (grille[i][j] == '1') {
                nvlle[i][j] =(voisin == 2 || voisin ==  3) ? '1' : '0';
            }else {
                nvlle[i][j] = (voisin ==3) ? '1' : '0';
            }
        }
    }
    grille = nvlle;
}

//Compte le nombre de cellules qui composent la grille
int Ligne::CompteCell(int x,int y,vector<string> grille) {
    int compteur = 0;
    for(int i=-1; i<=1; i++) {
        for(int j=-1; j<=1; j++) {
            if(i == 0 && j == 0) continue;
            int nx = x+i;
            int ny = y+j;
            if (nx >= 0 && nx<ligne && ny>= 0 && ny < colonne) {
                compteur += grille[nx][ny] =='1';
            }
        }
    }
    return compteur;
}

//Affichage de la Grille de '0' et '1' dans la console de l'ordinateur
void Ligne::AfficheGrille() {
    for (const auto& l : grille) {
        cout << l << '\n';
    }
    cout << '\n';
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////.
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////.
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////.